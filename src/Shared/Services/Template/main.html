<!-- 
  @var currentNotObserved?: boolean
  @var currentTab?:         chrome.tabs.Tab
  @var observedTabs:        TabInfo[]
  /*
   *  id:           number,
   *  status:       "idle" | "searching"
   *  searchStatus: boolean
   *  isFound:      boolean
   *  filters:      {
   *                   dateTillFilter: string
   *                }
   */
-->
<div class="container my-2">
  <div class="row">
    <h1 class="h2 mt-4 mx-auto text-center text-primary">
      Welcome To Relay Automation!
    </h1>
  </div>
  <div class="row">
    <h2 class="h4 mt-2 mx-auto text-center text-secondary">
      Configure the extension and start booking automatically
    </h2>
  </div>
  <hr />
  {{ #currentNotObserved }}
    <div class="row">    
      <span class="text-secondary d-block mx-auto">The current tab is not observed!</span>
    </div>
    <div class="row">
      <button 
        id="addCurrentButton" 
        type="button" 
        class="mt-1 mb-2 btn btn-primary px-4 mx-auto" 
        data-tab-id={{ currentTab.id }}>Add the button to observed list with id: {{ currentTab.id }}</button>
    </div>
  {{ /currentNotObserved }}
  <div class="row row-cols-2">
    {{ #observedTabs }}
      <div class="col mb-2">
        <div class="border border-primary p-2">
          <h5>Tab Id: {{ id }}</h5>
          <span>Status: {{ status }} 
            {{ #isFound }}<span class="mark mark-success"></span>{{ /isFound }}
          </span>
          {{#isFound}}
            <button class="btn btn-primary w-100 tab-switch-btn mt-1" data-tab-id={{ id }}>Switch</button>
          {{/isFound}}
          <div class="filters mt-1">
          <form id="filtersForm">
              <hr />
              <div class="form-group">
              <label for="date-till-filter">Time Filter 
                {{^filters.dateTillFilter}}<span class="mark mark-warning"></span> (Not given){{/filters.dateTillFilter}}
                {{#filters.dateTillFilter}}<span class="mark mark-success"></span>{{/filters.dateTillFilter}}
              </label>
                <input name="date-till-filter" type="datetime-local" class="form-control" 
                  value="{{ filters.dateTillFilter }}" data-tab-id={{ id }}/>
                <small class="form-text text-muted">Insert the date till which you want to search.</small>
              </div>
            </form>
          </div>
          <hr />
          <div class="actions row row-col-2 mt-2">
            <div class="w-100 text-center mb-2">Search</div>
            <div class="col">
              <button class="btn btn-primary w-100 tab-start-btn" data-tab-id={{ id }}
                {{#searchStatus}}disabled="disabled" title="Already Searching"{{/searchStatus}}
              >Start</button>
            </div>
            <div class="col">
              <button class="btn btn-primary w-100 tab-stop-btn" data-tab-id={{ id }} 
                {{^searchStatus}}disabled="disabled"{{/searchStatus}}
              >Stop</button>
            </div>
          </div>
          <hr />
          <button class="btn btn-primary w-100 tab-remove-btn" data-tab-id={{ id }}
            {{#searchStatus}}disabled="disabled" title="Please stop the search before remove"{{/searchStatus}}
          >Remove</button>
          {{^isFound}}
            <button class="btn btn-primary w-100 tab-switch-btn mt-1" data-tab-id={{ id }}>Switch</button>
          {{/isFound}}
        </div>
      </div>
    {{ /observedTabs }}
  </div>
</div>
